# ログイン機能 クイックテスト手順

**即座にテスト開始できる簡易版手順書**

## 🚀 今すぐテスト開始

### 1. サーバー状況確認
```bash
# 開発サーバーが起動中かチェック
http://localhost:3010
```

**✅ サーバー起動済み**: ポート3010でNext.js開発サーバーが動作中

### 2. 基本テストユーザー

既存ユーザーでテスト可能です：

| テスト項目 | メールアドレス | パスワード | 期待結果 |
|-----------|--------------|-----------|----------|
| **正常ログイン** | 既存の認証済みユーザー | そのパスワード | ✅ 成功 |
| **間違ったパスワード** | 既存ユーザー | `WrongPassword123` | ❌ エラー |
| **存在しないユーザー** | `nonexistent@example.com` | `AnyPassword123` | ❌ エラー |

---

## 📱 手動テスト実行

### テスト 1: 正常ログイン ✅

1. **ブラウザーで開く**: http://localhost:3010/login
2. **既存ユーザーでログイン試行**
3. **チェック項目**:
   - [ ] ログイン成功
   - [ ] `/dashboard` にリダイレクト  
   - [ ] ヘッダーにユーザー名表示
   - [ ] 「ログアウト」ボタン表示

### テスト 2: 間違ったパスワード ❌

1. **同じユーザーで間違ったパスワード入力**
2. **チェック項目**:
   - [ ] エラーメッセージ表示: 「メールアドレスまたはパスワードが正しくありません」
   - [ ] ページリダイレクトされない
   - [ ] セッション作成されない

### テスト 3: ログアウト 🚪

1. **ヘッダーの「ログアウト」クリック**
2. **チェック項目**:
   - [ ] ホームページ (`/`) にリダイレクト
   - [ ] ヘッダーが「ログイン | 登録」に変更
   - [ ] セッション削除確認

### テスト 4: セッション維持 🔄

1. **ログイン状態でブラウザーリロード (F5)**
2. **チェック項目**:
   - [ ] ログイン状態維持
   - [ ] 再認証不要
   - [ ] ユーザー情報保持

### テスト 5: ヘッダー表示 🎭

1. **未認証 → 認証済み → 未認証の流れ確認**
2. **チェック項目**:
   - [ ] 未認証時: 「ログイン | 登録」
   - [ ] 認証済み: 「ユーザー名 | ログアウト」
   - [ ] UI更新がスムーズ

### テスト 6: callbackURL機能 🎯

1. **未認証で `/members-only` アクセス**
2. **ログイン後に元ページ復帰確認**
3. **チェック項目**:
   - [ ] `/login?callbackUrl=%2Fmembers-only` にリダイレクト
   - [ ] ログイン後に `/members-only` に自動復帰

---

## 🔍 トラブルシューティング

### サーバーが起動しない
```bash
# プロセス確認
netstat -aon | findstr :3010

# 強制終了
taskkill /f /pid [PID番号]

# 再起動
npm run dev
```

### データベース接続エラー

**MongoDB Atlasを使用している場合**:
1. `.env.local` の `MONGODB_URI` を確認
2. Atlas接続文字列の正確性確認
3. IPアドレス制限設定確認

**ローカルMongoDBの場合**:
```bash
# MongoDB サービス確認
net start MongoDB
# または
mongod
```

### よくある問題

| 症状 | 原因 | 解決策 |
|------|------|--------|
| ログインボタンが反応しない | JavaScript エラー | F12 → Console確認 |
| `500 Internal Server Error` | DB接続エラー | MongoDB接続確認 |
| セッション維持されない | NEXTAUTH_SECRET未設定 | 環境変数確認 |

---

## ✅ テスト完了確認

**すべてのテストが期待通り動作すれば**:

```
🎉 Phase 2 認証基盤テスト完了!

✅ 基本認証機能: 正常
✅ エラーハンドリング: 正常  
✅ セッション管理: 正常
✅ UI/UX更新: 正常
✅ callbackURL機能: 正常

→ 本番運用準備完了！
```

---

## 🔗 関連ドキュメント

- **詳細版テスト手順**: [README-login-test.md](./README-login-test.md)
- **パスワード強度機能**: [README-password-strength.md](./README-password-strength.md)
- **Phase 2実装ガイド**: [README-phase-1-2.md](./README-phase-1-2.md)

---

**🚀 今すぐ http://localhost:3010/login でテスト開始!**