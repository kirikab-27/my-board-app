# システム全体動作確認テスト項目一覧表

掲示板アプリの全機能を網羅的にテストするためのチェックリストです。各項目を順番に実行して、システムが正常に動作することを確認してください。

## 🔍 テスト実行前の準備

### 環境確認
- [ ] `npm run dev` でサーバーが正常起動（通常 http://localhost:3010）
- [ ] MongoDBが起動していることを確認
- [ ] `.env.local` の環境変数が正しく設定されていることを確認
- [ ] ブラウザのデベロッパーツールを開いてエラー監視準備完了

### 初期データ準備
- [ ] テスト用ユーザーアカウントを1-2個作成済み
- [ ] テスト用投稿データが数件存在する
- [ ] 必要に応じて `node scripts/clear-sessions.js` でセッションクリア

## 📋 Phase別テスト項目

### Phase 0: 基本機能テスト

#### 🏠 ランディングページ（`/`）
- [ ] ページが正常に表示される
- [ ] 未認証ユーザー: 機能紹介・会員登録CTAが表示される
- [ ] 認証済みユーザー: 自動的に `/board` にリダイレクトされる
- [ ] レスポンシブ表示（モバイル・タブレット・デスクトップ）が正常

#### 🔧 開発・品質管理
- [ ] `npm run lint` - ESLintエラーなし
- [ ] `npx tsc --noEmit` - TypeScript型エラーなし
- [ ] ブラウザコンソールにエラーなし
- [ ] パフォーマンス: ページ読み込み < 3秒

### Phase 1-2: 認証機能テスト

#### 📧 ユーザー登録（`/register`）
- [ ] メールアドレス・名前・パスワード入力フォーム表示
- [ ] パスワード強度インジケーター動作（弱・普通・強・とても強）
- [ ] 日本語名前（ひらがな・カタカナ・漢字）で登録可能
- [ ] Google OAuth ボタンクリックで認証開始
- [ ] GitHub OAuth ボタンクリックで認証開始
- [ ] バリデーションエラー表示（空白・不正メール・弱いパスワード）
- [ ] 登録成功後、自動ログイン → ダッシュボードリダイレクト

#### 🔐 ログイン（`/login`）
- [ ] メールアドレス・パスワード入力フォーム表示
- [ ] 「パスワードを忘れた方」リンク動作
- [ ] Google・GitHub ソーシャルログインボタン動作
- [ ] 正しい認証情報でログイン成功
- [ ] 間違った認証情報でエラー表示
- [ ] ブルートフォース対策: 連続失敗後の制限表示
- [ ] ログイン成功後、callbackURL機能（元のページに戻る）

#### 👤 プロフィール機能（`/profile`）
- [ ] プロフィール表示ページ: アバター・名前・メール・自己紹介・ロール表示
- [ ] プロフィール編集（`/profile/edit`）: 名前・自己紹介更新
- [ ] パスワード変更（`/profile/password`）: 現在パスワード確認・新パスワード設定
- [ ] 頭文字アバター表示（日本語・英語対応・6色バリエーション）
- [ ] 文字数制限バリデーション・リアルタイム文字カウンター
- [ ] 更新成功メッセージ表示

#### 🚪 ログアウト
- [ ] AuthButton「ログアウト」クリックで正常ログアウト
- [ ] ログアウト後、ランディングページにリダイレクト
- [ ] セッション完全削除確認

### Phase 2.5: セキュリティ・UI/UX強化テスト

#### 🛡️ ブルートフォース攻撃対策
- [ ] ログイン連続失敗（5回）後、30分制限発動
- [ ] 残り試行回数リアルタイム表示
- [ ] IP制限: 15分10回失敗後、1時間ロック
- [ ] 管理者ダッシュボード（`/admin/security`）で攻撃統計確認

#### 📱 レスポンシブ・UI/UX
- [ ] 全ページでモバイル・タブレット・デスクトップ表示確認
- [ ] ローディング状態表示（認証・データ取得時）
- [ ] エラーハンドリング・ユーザーフレンドリーなエラーメッセージ
- [ ] ナビゲーション統合・AuthButton機能

### Phase 3-4.5: 会員制掲示板CRUD機能テスト

#### 📋 掲示板一覧（`/board`）
- [ ] 認証ガード: 未認証ユーザーはログインページにリダイレクト
- [ ] 投稿一覧表示（タイトル・コンテンツプレビュー・作成者・日時）
- [ ] 検索機能: 部分一致・リアルタイム検索・ハイライト表示
- [ ] 並び替え機能: 作成日時・更新日時・いいね数（昇順・降順）
- [ ] ページネーション: ページ切り替え・件数変更（10・20・50件）
- [ ] いいねボタン: クリックで + 1、再クリックで - 1
- [ ] 本人投稿のみ編集・削除メニュー表示

#### ✍️ 投稿作成（`/board/create`）
- [ ] 認証必須: 未認証ユーザーはアクセス不可
- [ ] タイトル入力（任意・100文字制限）
- [ ] コンテンツ入力（必須・1000文字制限）
- [ ] リアルタイム文字カウンター表示
- [ ] バリデーション: 必須項目・文字数制限チェック
- [ ] 投稿成功後、掲示板一覧にリダイレクト
- [ ] 長文テキスト折り返し表示確認

#### 📖 投稿詳細（`/board/[id]`）
- [ ] 個別投稿の詳細表示（タイトル・フルコンテンツ・作成者情報）
- [ ] プロフィールアバター・作成日時・更新日時表示
- [ ] いいね機能: いいねボタン・いいね数表示
- [ ] 本人投稿のみ「編集」「削除」ボタン表示
- [ ] 削除確認ダイアログ・削除実行
- [ ] 長文テキスト適切な折り返し表示（⭐重要）

#### ✏️ 投稿編集（`/board/[id]/edit`）
- [ ] 本人のみアクセス可能・権限チェック
- [ ] 既存データで入力フォーム初期化
- [ ] タイトル・コンテンツ編集・文字数制限
- [ ] 更新成功後、投稿詳細ページにリダイレクト
- [ ] キャンセルボタンで詳細ページに戻る

### Phase 5: セキュリティ強化テスト

#### 🔒 XSS対策テスト
- [ ] SafeContentコンポーネント動作確認
- [ ] 危険なHTMLタグ・スクリプト入力時のサニタイゼーション
- [ ] DOMPurify統合・リアルタイム検出
- [ ] 投稿・コメント・プロフィールでの XSS 攻撃検出・無害化

#### 🛡️ CSRF対策テスト
- [ ] 投稿作成・編集・削除時のCSRFトークン検証
- [ ] Origin・Refererヘッダーチェック
- [ ] 不正なリクエストの拒否・エラー表示

#### ⏱️ レート制限テスト
- [ ] 一般ページ: 1分5回制限
- [ ] API: 1分10回制限
- [ ] 認証関連: 1分5回制限
- [ ] 制限超過時の 429 エラー・Retry-After ヘッダー

#### 🔍 セキュリティ監査ログ
- [ ] 管理者ダッシュボードで監査ログ確認
- [ ] 攻撃統計・脅威評価レポート表示
- [ ] セキュリティイベント（XSS・CSRF・レート制限違反）記録

#### 🚫 NoSQLインジェクション対策
- [ ] MongoDB演算子（$where・$regex等）検出・拒否
- [ ] ObjectID検証・プロトタイプ汚染防止
- [ ] 検索・フィルタリング機能での入力サニタイゼーション

## 🧪 エラーハンドリング・例外テスト

### ネットワーク・サーバーエラー
- [ ] MongoDB接続エラー時の適切なエラー表示
- [ ] API 500エラー時のユーザーフレンドリーなメッセージ
- [ ] ネットワーク断時の再接続・リトライ機能

### 無効なデータ・URL
- [ ] 存在しない投稿ID（`/board/invalid-id`）でのエラーページ
- [ ] 無効なユーザーID・セッション期限切れ処理
- [ ] 権限不足時の適切なリダイレクト・エラー表示

### ブラウザ互換性
- [ ] Chrome・Firefox・Safari・Edgeでの動作確認
- [ ] JavaScript無効時の基本機能動作
- [ ] モバイルブラウザ（iOS Safari・Android Chrome）

## 📊 パフォーマンス・品質テスト

### レスポンシブ・UI/UX
- [ ] 画面サイズ別表示確認（320px～1920px）
- [ ] タッチ操作・スワイプ機能（モバイル）
- [ ] キーボードナビゲーション・アクセシビリティ

### パフォーマンス指標
- [ ] ページ読み込み時間 < 3秒
- [ ] API応答時間 < 500ms
- [ ] いいね・検索・並び替えのリアルタイム反応
- [ ] 大量データ（100件以上投稿）での動作確認

### メモリ・リソース
- [ ] メモリリーク確認（長時間利用・ページ遷移繰り返し）
- [ ] 画像・アセット最適化・CDN活用
- [ ] ブラウザキャッシュ・セッション管理

## 🔧 システム管理・運用テスト

### データベース整合性
- [ ] ユーザー・投稿・いいね・セッションデータ整合性確認
- [ ] マイグレーションスクリプト実行確認
- [ ] バックアップ・リストア手順検証

### セキュリティ設定
- [ ] HTTPS設定・SSL証明書確認
- [ ] セキュリティヘッダー（CSP・CSRF・XSS-Protection）
- [ ] 環境変数・シークレット管理

### ログ・監視
- [ ] アプリケーションログ・エラーログ出力確認
- [ ] Sentry エラートラッキング動作確認
- [ ] パフォーマンス監視・アラート設定

## ✅ テスト実行記録

### 実行日時: ___________
### 実行者: ___________

#### Phase 0: 基本機能
- [ ] ランディングページ: ⭕ / ❌
- [ ] 開発・品質管理: ⭕ / ❌

#### Phase 1-2: 認証機能
- [ ] ユーザー登録: ⭕ / ❌
- [ ] ログイン: ⭕ / ❌
- [ ] プロフィール機能: ⭕ / ❌
- [ ] ログアウト: ⭕ / ❌

#### Phase 2.5: セキュリティ・UI/UX
- [ ] ブルートフォース攻撃対策: ⭕ / ❌
- [ ] レスポンシブ・UI/UX: ⭕ / ❌

#### Phase 3-4.5: 掲示板CRUD機能
- [ ] 掲示板一覧: ⭕ / ❌
- [ ] 投稿作成: ⭕ / ❌
- [ ] 投稿詳細: ⭕ / ❌
- [ ] 投稿編集: ⭕ / ❌

#### Phase 5: セキュリティ強化
- [ ] XSS対策: ⭕ / ❌
- [ ] CSRF対策: ⭕ / ❌
- [ ] レート制限: ⭕ / ❌
- [ ] 監査ログ: ⭕ / ❌
- [ ] NoSQLインジェクション対策: ⭕ / ❌

#### 総合評価
- [ ] 全機能正常動作: ⭕ / ❌
- [ ] 重大な問題なし: ⭕ / ❌
- [ ] 本番環境デプロイ準備完了: ⭕ / ❌

### 🚨 発見した問題・課題

1. **問題内容**: ___________
   - 影響度: 高 / 中 / 低
   - 対応予定: ___________

2. **問題内容**: ___________
   - 影響度: 高 / 中 / 低
   - 対応予定: ___________

### 📝 テスト実行メモ・改善提案

___________________________________________
___________________________________________

---

**注意事項**:
- テスト実行前に必ず開発環境でのバックアップを作成してください
- 本番環境でのテストは慎重に実行し、影響範囲を限定してください
- 問題発見時は即座に記録し、優先度を判断して対応してください